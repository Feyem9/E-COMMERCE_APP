<app-navbar></app-navbar>

<div class="home-container">
  <!-- Hero Section -->
  <section class="hero bg-gradient-primary text-white py-5">
    <div class="container">
      <div class="row align-items-center min-vh-50">
        <div class="col-lg-6">
          <div class="hero-text">
            <h1 class="display-4 fw-bold mb-3">Welcome to TECH-MARKET</h1>
            <p class="lead mb-4">Discover the latest smartphones and technology deals!</p>
            <button 
              class="btn btn-warning btn-lg px-5" 
              (click)="navigateToProducts()">
              <i class="fas fa-shopping-cart me-2"></i>
              Shop Now
            </button>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="hero-image text-center">
            <i class="fas fa-mobile-alt display-1 text-warning"></i>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Products Section -->
  <section class="featured-products py-5 bg-light">
    <div class="container">
      <div class="text-center mb-5">
        <h2 class="display-6 fw-bold">Featured Products</h2>
        <p class="text-muted">Our top-selling smartphones</p>
      </div>

      <!-- Loading State -->
      <div *ngIf="loading" class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="error" class="alert alert-danger text-center" role="alert">
        <i class="fas fa-exclamation-triangle me-2"></i>
        {{ error }}
        <button class="btn btn-outline-danger ms-3" (click)="loadFeaturedProducts()">
          <i class="fas fa-redo me-1"></i>
          Retry
        </button>
      </div>

      <!-- Products Grid -->
      <div *ngIf="!loading && !error" class="row g-4">
        <div *ngFor="let product of featuredProducts" class="col-lg-4 col-md-6">
          <div class="card h-100 shadow-sm product-card">
            <div class="card-img-wrapper position-relative">
              <img 
                [src]="product.picture" 
                [alt]="product.name" 
                class="card-img-top product-image"
                onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
              <div class="discount-badge" *ngIf="product.discount_price < product.current_price">
                <span class="badge bg-danger">
                  {{ ((product.current_price - product.discount_price) / product.current_price * 100 | number:'1.0-0') }}% OFF
                </span>
              </div>
            </div>
            <div class="card-body d-flex flex-column">
              <h5 class="card-title text-truncate mb-2">{{ product.name }}</h5>
              <p class="card-text text-muted small flex-grow-1">{{ product.description }}</p>
              <div class="pricing mb-3">
                <span class="h5 text-success fw-bold">
                  {{ product.discount_price | currency:'EUR':'symbol':'1.2-2' }}
                </span>
                <span 
                  *ngIf="product.discount_price < product.current_price" 
                  class="text-decoration-line-through text-muted ms-2">
                  {{ product.current_price | currency:'EUR':'symbol':'1.2-2' }}
                </span>
              </div>
              <div class="card-actions">
                <button 
                  class="btn btn-primary w-100"
                  (click)="addToCart(product)">
                  <i class="fas fa-cart-plus me-2"></i>
                  Add to Cart
                </button>
                <button 
                  class="btn btn-outline-secondary w-100 mt-2"
                  (click)="navigateToProduct(product.id)">
                  <i class="fas fa-eye me-2"></i>
                  View Details
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- View All Products -->
      <div class="text-center mt-5" *ngIf="!loading && !error">
        <button 
          class="btn btn-outline-primary btn-lg"
          (click)="navigateToProducts()">
          View All Products
          <i class="fas fa-arrow-right ms-2"></i>
        </button>
      </div>
    </div>
  </section>

  <!-- Newsletter Section -->
  <section class="newsletter py-5 bg-primary text-white">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 mb-4 mb-md-0">
          <h2 class="fw-bold mb-3">Stay Updated!</h2>
          <p class="lead">
            Subscribe to our newsletter and be the first to know about new products, 
            exclusive deals, and special promotions.
          </p>
        </div>
        <div class="col-md-6">
          <div class="newsletter-form">
            <form class="d-flex gap-2" (ngSubmit)="onNewsletterSubmit()">
              <input 
                type="email" 
                class="form-control form-control-lg"
                placeholder="Enter your email"
                required>
              <button 
                type="submit" 
                class="btn btn-warning btn-lg px-4">
                Subscribe
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Promotions Section -->
  <section class="promotions py-5">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 mx-auto">
          <div class="promotion-banner bg-gradient-warning text-dark p-5 rounded-3 text-center">
            <h2 class="fw-bold mb-3">ðŸ”¥ Exclusive Promotions</h2>
            <p class="lead mb-4">Up to 50% off on selected smartphones! Limited time offer.</p>
            <button 
              class="btn btn-dark btn-lg px-5"
              (click)="navigateToProducts()">
              <i class="fas fa-fire me-2"></i>
              Shop Now
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>